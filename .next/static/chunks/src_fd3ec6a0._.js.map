{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/layout/AppHeader.tsx"],"sourcesContent":["import React from 'react';\nimport { SidebarTrigger } from '@/components/ui/sidebar';\n\ninterface AppHeaderProps {\n  title: string;\n}\n\nexport default function AppHeader({ title }: AppHeaderProps) {\n  return (\n    <header className=\"sticky top-0 z-10 flex h-14 items-center gap-4 border-b bg-background px-6 shadow-sm\">\n      <SidebarTrigger className=\"md:hidden\" />\n      <h1 className=\"font-headline text-xl font-semibold\">{title}</h1>\n      {/* Add other header elements like user menu, notifications here if needed */}\n    </header>\n  );\n}\n"],"names":[],"mappings":";;;;AACA;;;AAMe,SAAS,UAAU,EAAE,KAAK,EAAkB;IACzD,qBACE,6LAAC;QAAO,WAAU;;0BAChB,6LAAC,sIAAA,CAAA,iBAAc;gBAAC,WAAU;;;;;;0BAC1B,6LAAC;gBAAG,WAAU;0BAAuC;;;;;;;;;;;;AAI3D;KARwB","debugId":null}},
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAG1B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,4DACA;QAED,GAAG,KAAK;;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,sDACA;QAED,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGrC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAI,KAAK;QAAK,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QAAa,GAAG,KAAK;;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,SAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 155, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from 'react';\n\nimport {cn} from '@/lib/utils';\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, React.ComponentProps<'textarea'>>(\n  ({className, ...props}, ref) => {\n    return (\n      <textarea\n        className={cn(\n          'flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    );\n  }\n);\nTextarea.displayName = 'Textarea';\n\nexport {Textarea};\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;;AAEA,MAAM,yBAAW,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAC9B,CAAC,EAAC,SAAS,EAAE,GAAG,OAAM,EAAE;IACtB,qBACE,6LAAC;QACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,qTACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,SAAS,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 190, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/ai/flows/cs-whatsapp-reply-flow.ts"],"sourcesContent":["'use server';\n/**\n * @fileOverview AI flow for WhatsApp customer service replies.\n * Integrates with Firestore settings for dynamic AI behavior.\n * - generateWhatsAppReply - Function to generate a draft reply.\n */\n\nimport { ai } from '@/ai/genkit';\nimport { getProductServiceDetailsByNameTool } from '@/ai/tools/productLookupTool';\nimport { getClientDetailsTool } from '@/ai/tools/clientLookupTool';\nimport { getKnowledgeBaseInfoTool } from '@/ai/tools/knowledgeLookupTool';\nimport { createBookingTool } from '@/ai/tools/createBookingTool';\nimport type { WhatsAppReplyInput, WhatsAppReplyOutput, ChatMessage } from '@/types/ai/cs-whatsapp-reply';\nimport { WhatsAppReplyInputSchema, WhatsAppReplyOutputSchema } from '@/types/ai/cs-whatsapp-reply';\nimport { z } from 'genkit';\nimport { DEFAULT_AI_SETTINGS, type AiSettingsFormValues } from '@/types/aiSettings';\nimport { format as formatDateFns, addDays } from 'date-fns';\nimport { doc, getDoc } from 'firebase/firestore';\nimport { db } from '@/lib/firebase';\n\nasync function getAiSettingsFromFirestore(): Promise<Partial<AiSettingsFormValues>> {\n  try {\n    const settingsDocRef = doc(db, 'appSettings', 'aiAgentConfig');\n    const docSnap = await getDoc(settingsDocRef);\n    if (docSnap.exists()) {\n      console.log(\"AI settings fetched from Firestore:\", docSnap.data());\n      return docSnap.data() as Partial<AiSettingsFormValues>;\n    }\n    console.log(\"No AI settings found in Firestore, using defaults.\");\n    return {};\n  } catch (error) {\n    console.error(\"Error fetching AI settings from Firestore:\", error);\n    return {}; // Fallback to empty object, defaults will apply\n  }\n}\n\nexport async function generateWhatsAppReply({ customerMessage, senderNumber, chatHistory }: { customerMessage: string; senderNumber?: string; chatHistory?: ChatMessage[] }): Promise<WhatsAppReplyOutput> {\n  const firestoreSettings = await getAiSettingsFromFirestore();\n  const agentSettings = { ...DEFAULT_AI_SETTINGS, ...firestoreSettings };\n  const now = new Date();\n\n  const flowInput: WhatsAppReplyInput = {\n    customerMessage,\n    senderNumber,\n    chatHistory: chatHistory || [],\n    agentBehavior: agentSettings.agentBehavior,\n    knowledgeBase: agentSettings.knowledgeBaseDescription,\n    currentDate: formatDateFns(now, 'yyyy-MM-dd'),\n    currentTime: formatDateFns(now, 'HH:mm'),\n    tomorrowDate: formatDateFns(addDays(now, 1), 'yyyy-MM-dd'),\n    dayAfterTomorrowDate: formatDateFns(addDays(now, 2), 'yyyy-MM-dd'),\n  };\n\n  console.log(\"generateWhatsAppReply input to flow:\", JSON.stringify(flowInput, null, 2));\n  const aiResponse = await whatsAppReplyFlowCombined_v5_refined(flowInput);\n  return aiResponse;\n}\n\nconst replyPromptCombined_v5_refined = ai.definePrompt({\n  name: 'whatsAppReplyPrompt_Combined_v5_refined',\n  input: { schema: WhatsAppReplyInputSchema },\n  output: { schema: WhatsAppReplyOutputSchema }, // Pastikan tidak ada allowUnionTypes di sini karena outputnya sederhana\n  tools: [\n    getKnowledgeBaseInfoTool,\n    getProductServiceDetailsByNameTool,\n    getClientDetailsTool,\n    createBookingTool\n  ],\n  prompt: `Anda adalah Zoya, seorang Customer Service Assistant AI untuk QLAB Auto Detailing.\nPerilaku Anda: {{{agentBehavior}}}.\nAnda bertugas membantu pengguna dengan menjawab pertanyaan atau memproses permintaan mereka mengenai layanan dan produk QLAB.\n\nTugas Utama Anda adalah menghasilkan balasan dalam format JSON dengan field \"suggestedReply\".\n\nAlur Kerja Utama Anda:\n1.  **PAHAMI PESAN PELANGGAN**: Identifikasi apa yang dibutuhkan pelanggan. Apakah itu pertanyaan umum, detail produk/layanan, data pribadi, atau permintaan booking?\n\n2.  **GUNAKAN TOOL YANG TEPAT UNTUK MENGUMPULKAN INFORMASI (JIKA PERLU)**:\n    *   **Untuk pertanyaan umum, kebijakan, jam operasional, deskripsi umum layanan/proses**:\n        *   Gunakan tool \\`getKnowledgeBaseInfoTool\\`.\n        *   Inputnya adalah 'query' berupa inti pertanyaan pelanggan.\n    *   **Untuk HARGA, DURASI, KETERSEDIAAN, atau DETAIL SPESIFIK produk/layanan**:\n        *   **WAJIB GUNAKAN TOOL** \\`getProductServiceDetailsByNameTool\\` SEBELUM MENJAWAB.\n        *   Input untuk tool ini adalah 'productName'. Anda bisa menggunakan nama produk/layanan yang disebut pelanggan.\n        *   Jika pelanggan bertanya tentang kategori layanan umum (misalnya \"coating apa saja?\", \"ada paket detailing apa?\", \"cuci motor\", \"info coating xmax\"), ANDA HARUS menggunakan tool 'getProductServiceDetailsByNameTool' dengan 'productName' yang relevan (mis. \"coating\", \"paket detailing\", \"cuci motor\", \"coating xmax\") untuk mendapatkan daftar layanan yang relevan SEBELUM memberikan jawaban.\n        *   Tool ini bisa mengembalikan SATU objek produk/layanan, atau ARRAY beberapa objek, atau null.\n        *   **CARA MENANGANI OUTPUT dari \\`getProductServiceDetailsByNameTool\\`**:\n            *   **JIKA TOOL MENGEMBALIKAN ARRAY BEBERAPA ITEM**:\n                1.  Sebutkan NAMA PERSIS dari beberapa item yang dikembalikan oleh tool (maksimal 2-3 item jika arraynya panjang). Contoh: \"Kami ada pilihan [NAMA ITEM 1 DARI TOOL] dan [NAMA ITEM 2 DARI TOOL], Kak.\"\n                2.  Untuk setiap item yang Anda sebutkan (misalnya '[NAMA ITEM DARI TOOL]'):\n                    a.  Jika '[NAMA ITEM DARI TOOL]' memiliki array \\`variants\\` yang TIDAK KOSONG (misalnya varian ukuran S, M, L, XL):\n                        Sebutkan NAMA ITEM DASAR ('[NAMA ITEM DARI TOOL]') dan bahwa ia memiliki beberapa pilihan varian.\n                        INFORMASI UKURAN KENDARAAN UMUM UNTUK COATING (Jika relevan dan produknya memiliki varian ukuran S/M/L/XL):\n                        - XMAX, NMAX, PCX, ADV: Biasanya ukuran L atau XL.\n                        - Vario, Aerox, Lexi: Biasanya ukuran M atau L.\n                        - Beat, Scoopy, Mio, Fazzio: Biasanya ukuran S atau M.\n                        JIKA PELANGGAN MENYEBUTKAN JENIS KENDARAAN (mis. XMAX) DAN VARIANNYA ADALAH UKURAN, gunakan 'INFORMASI UKURAN KENDARAAN UMUM' di atas untuk menyarankan ukuran, lalu tanyakan konfirmasi. Contoh: \"Untuk [NAMA ITEM DARI TOOL] ini ada ukuran S, M, L, XL. XMAX Kakak biasanya cocok ukuran L atau XL. Mau yang ukuran mana?\"\n                        ATAU, jika pelanggan tidak menyebutkan jenis kendaraan, Anda bisa sebutkan NAMA dan HARGA dari 1-2 VARIANNYA sebagai contoh: \"[NAMA ITEM DARI TOOL] ini ada varian [NAMA VARIAN 1] harganya Rp [HARGA VARIAN 1] dan [NAMA VARIAN 2] harganya Rp [HARGA VARIAN 2].\"\n                        JANGAN sebutkan harga item dasar ('[NAMA ITEM DARI TOOL]') jika harga dasarnya 0 atau tidak ada (artinya harga ditentukan varian).\n                    b.  Jika '[NAMA ITEM DARI TOOL]' TIDAK memiliki array \\`variants\\` (atau array \\`variants\\` kosong) DAN harga item dasar (\\`price\\`) lebih dari 0:\n                        Sebutkan HARGA dari '[NAMA ITEM DARI TOOL]' tersebut. Contoh: \"Untuk layanan [NAMA ITEM DARI TOOL], harganya Rp [HARGA ITEM DARI TOOL].\"\n            *   **JIKA TOOL MENGEMBALIKAN SATU ITEM** (objek tunggal):\n                1.  Gunakan NAMA PERSIS dari field \\`name\\` output tool sebagai NAMA LAYANAN/PRODUK.\n                2.  Jika item tersebut memiliki array \\`variants\\` yang TIDAK KOSONG:\n                    Sebutkan bahwa item tersebut memiliki beberapa pilihan varian. Jika pelanggan menyebutkan jenis kendaraan (misalnya XMAX) dan varian tersebut adalah ukuran (S, M, L, XL), gunakan 'INFORMASI UKURAN KENDARAAN UMUM' (lihat di atas) untuk menyarankan ukuran, lalu tanyakan konfirmasi. Contoh: \"Untuk [NAMA ITEM DARI TOOL], tersedia dalam ukuran S, M, L, dan XL. Untuk XMAX biasanya ukuran L atau XL, Kak. Mau dihitungkan untuk ukuran yang mana?\"\n                3.  Jika item tersebut TIDAK memiliki array \\`variants\\` (atau array \\`variants\\` kosong) DAN harga item dasar (\\`price\\`) lebih dari 0:\n                    Sebutkan HARGA dari field \\`price\\` item tersebut.\n            *   **JIKA PELANGGAN BERTANYA HARGA VARIAN SPESIFIK** (mis. \"Coating Glossy ukuran L berapa?\"):\n                Pastikan Anda menggunakan \\`getProductServiceDetailsByNameTool\\` dengan nama item dasar (mis. \"Coating Motor Glossy\"). Lalu, dari output tool, cari varian \"L\" (atau nama varian yang paling cocok) di dalam array \\`variants\\` item tersebut untuk mendapatkan harga yang benar.\n            *   **SANGAT PENTING: JANGAN PERNAH MEMBUAT NAMA LAYANAN ATAU HARGA SENDIRI. SELALU gunakan NAMA dan HARGA PERSIS seperti yang dikembalikan oleh tool.**\n    *   **Untuk data pelanggan (poin, motor terdaftar, histori)**:\n        *   Gunakan tool \\`getClientDetailsTool\\`.\n    *   **Jika pelanggan meminta booking**:\n        *   Gunakan tool \\`createBookingTool\\`.\n        *   Pastikan Anda telah mengkonfirmasi layanan, nama, info kendaraan, dan tanggal/waktu sebelum memanggil tool ini. Jika tanggal/waktu tidak spesifik, tawarkan slot atau tanya preferensi.\n        *   Konfirmasi KETERSEDIAAN SLOT (gunakan pengetahuan umum dari {{{knowledgeBase}}} atau \\`getKnowledgeBaseInfoTool\\`) sebelum memanggil tool.\n\n3.  **KONTEKS TAMBAHAN**:\n    *   Panduan Umum (dari Firestore): {{{knowledgeBase}}}\n    *   Tanggal & Waktu Saat Ini: Tanggal {{{currentDate}}}, jam {{{currentTime}}}. Besok: {{{tomorrowDate}}}. Lusa: {{{dayAfterTomorrowDate}}}.\n\n4.  **SUSUN BALASAN**: Setelah mendapatkan informasi dari tool (jika ada), atau dari pengetahuan umum Anda, buatlah balasan yang membantu.\n\nGAYA BAHASA:\nGunakan bahasa Indonesia yang baku, sopan, ramah, dan natural untuk percakapan WhatsApp.\nJika pertanyaan di luar lingkup, sarankan untuk datang ke bengkel atau hubungi nomor resmi.\nJaga balasan ringkas namun lengkap. Hindari janji yang tidak pasti.\nSelalu akhiri dengan sapaan sopan atau kalimat positif.\n\nRIWAYAT PERCAKAPAN SEBELUMNYA (jika ada):\n{{#if chatHistory.length}}\n{{#each chatHistory}}\n  {{this.role}}: {{{this.content}}}\n{{/each}}\n{{/if}}\n\nPESAN PELANGGAN TERBARU:\nuser: {{{customerMessage}}}\n\nFORMAT BALASAN (SANGAT PENTING):\nFormat balasan ANDA HARUS SELALU berupa objek JSON dengan satu field bernama \"suggestedReply\" yang berisi teks balasan Anda.\nContoh balasan JSON: {\"suggestedReply\": \"Tentu, Kak. Untuk layanan Cuci Premium, harganya adalah Rp 75.000.\"}\nJANGAN PERNAH menyebutkan nama tool yang Anda gunakan dalam balasan teks ke pelanggan.\nHasilkan hanya objek JSON sebagai balasan Anda.\n`\n});\n\nconst whatsAppReplyFlowCombined_v5_refined = ai.defineFlow(\n  {\n    name: 'whatsAppReplyFlow_Combined_v5_refined',\n    inputSchema: WhatsAppReplyInputSchema,\n    outputSchema: WhatsAppReplyOutputSchema,\n  },\n  async (input: WhatsAppReplyInput) => {\n    console.log(\"whatsAppReplyFlowCombined_v5_refined input:\", JSON.stringify(input, null, 2));\n    const { output } = await replyPromptCombined_v5_refined(input);\n    if (!output) throw new Error('Gagal mendapatkan saran balasan dari AI.');\n    console.log(\"whatsAppReplyFlowCombined_v5_refined output:\", output);\n    return output;\n  }\n);\n"],"names":[],"mappings":";;;;;;IAoCsB,wBAAA,WAAA,GAAA,CAAA,GAAA,yNAAA,CAAA,wBAAA,EAAA,8CAAA,yNAAA,CAAA,aAAA,EAAA,KAAA,GAAA,yNAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 206, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/scroll-area.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,2BAAa,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAGhC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,6LAAC,6KAAA,CAAA,OAAwB;QACvB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,4BAA4B;QACzC,GAAG,KAAK;;0BAET,6LAAC,6KAAA,CAAA,WAA4B;gBAAC,WAAU;0BACrC;;;;;;0BAEH,6LAAC;;;;;0BACD,6LAAC,6KAAA,CAAA,SAA0B;;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG,6KAAA,CAAA,OAAwB,CAAC,WAAW;AAE7D,MAAM,0BAAY,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,EAG/B,CAAC,EAAE,SAAS,EAAE,cAAc,UAAU,EAAE,GAAG,OAAO,EAAE,oBACpD,6LAAC,6KAAA,CAAA,sBAAuC;QACtC,KAAK;QACL,aAAa;QACb,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,iDACA,gBAAgB,cACd,sDACF,gBAAgB,gBACd,wDACF;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,6KAAA,CAAA,kBAAmC;YAAC,WAAU;;;;;;;;;;;MAjB7C;AAoBN,UAAU,WAAW,GAAG,6KAAA,CAAA,sBAAuC,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 283, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/firebase.ts"],"sourcesContent":["\nimport { initializeApp, getApp, getApps, type FirebaseApp } from \"firebase/app\";\nimport { getFirestore, type Firestore } from \"firebase/firestore\";\n\n// Minimal logging\nconsole.log(\"[firebase.ts] Initializing Firebase...\");\n\nconst firebaseConfig = {\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\n};\n\nif (!firebaseConfig.projectId || !firebaseConfig.apiKey) {\n  console.error(\"[firebase.ts] FATAL ERROR: Firebase projectId or apiKey is MISSING in environment variables.\");\n}\n\nlet app: FirebaseApp;\nlet db: Firestore;\n\nif (getApps().length === 0) {\n  try {\n    app = initializeApp(firebaseConfig);\n    console.log(\"[firebase.ts] Firebase app initialized. Project ID:\", app.options.projectId);\n  } catch (e: any) {\n    console.error(\"[firebase.ts] FAILED to initialize Firebase app:\", e.message);\n    // @ts-ignore\n    app = null;\n  }\n} else {\n  app = getApp();\n  console.log(\"[firebase.ts] Using existing Firebase app. Project ID:\", app.options.projectId);\n}\n\n// @ts-ignore\nif (app) {\n  try {\n    // @ts-ignore\n    db = getFirestore(app);\n    console.log(\"[firebase.ts] Firestore instance obtained.\");\n  } catch (e: any) {\n    console.error(\"[firebase.ts] FAILED to get Firestore instance:\", e?.message);\n  }\n} else {\n    console.error(\"[firebase.ts] Firebase app not properly initialized, cannot get Firestore.\");\n}\n\nexport { app, db };\n"],"names":[],"mappings":";;;;AAQU;AAPV;AAAA;AACA;AAAA;;;AAEA,kBAAkB;AAClB,QAAQ,GAAG,CAAC;AAEZ,MAAM,iBAAiB;IACrB,MAAM;IACN,UAAU;IACV,SAAS;IACT,aAAa;IACb,iBAAiB;IACjB,KAAK;AACP;AAEA,IAAI,CAAC,eAAe,SAAS,IAAI,CAAC,eAAe,MAAM,EAAE;IACvD,QAAQ,KAAK,CAAC;AAChB;AAEA,IAAI;AACJ,IAAI;AAEJ,IAAI,CAAA,GAAA,uLAAA,CAAA,UAAO,AAAD,IAAI,MAAM,KAAK,GAAG;IAC1B,IAAI;QACF,MAAM,CAAA,GAAA,uLAAA,CAAA,gBAAa,AAAD,EAAE;QACpB,QAAQ,GAAG,CAAC,uDAAuD,IAAI,OAAO,CAAC,SAAS;IAC1F,EAAE,OAAO,GAAQ;QACf,QAAQ,KAAK,CAAC,oDAAoD,EAAE,OAAO;QAC3E,aAAa;QACb,MAAM;IACR;AACF,OAAO;IACL,MAAM,CAAA,GAAA,uLAAA,CAAA,SAAM,AAAD;IACX,QAAQ,GAAG,CAAC,0DAA0D,IAAI,OAAO,CAAC,SAAS;AAC7F;AAEA,aAAa;AACb,IAAI,KAAK;IACP,IAAI;QACF,aAAa;QACb,KAAK,CAAA,GAAA,sKAAA,CAAA,eAAY,AAAD,EAAE;QAClB,QAAQ,GAAG,CAAC;IACd,EAAE,OAAO,GAAQ;QACf,QAAQ,KAAK,CAAC,mDAAmD,GAAG;IACtE;AACF,OAAO;IACH,QAAQ,KAAK,CAAC;AAClB","debugId":null}},
    {"offset": {"line": 344, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/label.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,gBAAgB,CAAA,GAAA,mKAAA,CAAA,MAAG,AAAD,EACtB;AAGF,MAAM,sBAAQ,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAI3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,oKAAA,CAAA,OAAmB;QAClB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iBAAiB;QAC9B,GAAG,KAAK;;;;;;;AAGb,MAAM,WAAW,GAAG,oKAAA,CAAA,OAAmB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 383, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/form.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 601, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/select.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;AAEA;AACA;AACA;AAAA;AAAA;AAEA;AANA;;;;;;AAQA,MAAM,SAAS,qKAAA,CAAA,OAAoB;AAEnC,MAAM,cAAc,qKAAA,CAAA,QAAqB;AAEzC,MAAM,cAAc,qKAAA,CAAA,QAAqB;AAEzC,MAAM,8BAAgB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAGnC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,6LAAC,qKAAA,CAAA,UAAuB;QACtB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,mTACA;QAED,GAAG,KAAK;;YAER;0BACD,6LAAC,qKAAA,CAAA,OAAoB;gBAAC,OAAO;0BAC3B,cAAA,6LAAC,uNAAA,CAAA,cAAW;oBAAC,WAAU;;;;;;;;;;;;;;;;;;AAI7B,cAAc,WAAW,GAAG,qKAAA,CAAA,UAAuB,CAAC,WAAW;AAE/D,MAAM,qCAAuB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,EAG1C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,qKAAA,CAAA,iBAA8B;QAC7B,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,mNAAA,CAAA,YAAS;YAAC,WAAU;;;;;;;;;;;MAZnB;AAeN,qBAAqB,WAAW,GAAG,qKAAA,CAAA,iBAA8B,CAAC,WAAW;AAE7E,MAAM,uCAAyB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,EAG5C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,qKAAA,CAAA,mBAAgC;QAC/B,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,uNAAA,CAAA,cAAW;YAAC,WAAU;;;;;;;;;;;MAZrB;AAeN,uBAAuB,WAAW,GAChC,qKAAA,CAAA,mBAAgC,CAAC,WAAW;AAE9C,MAAM,8BAAgB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGnC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,WAAW,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACzD,6LAAC,qKAAA,CAAA,SAAsB;kBACrB,cAAA,6LAAC,qKAAA,CAAA,UAAuB;YACtB,KAAK;YACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,ucACA,aAAa,YACX,mIACF;YAEF,UAAU;YACT,GAAG,KAAK;;8BAET,6LAAC;;;;;8BACD,6LAAC,qKAAA,CAAA,WAAwB;oBACvB,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,OACA,aAAa,YACX;8BAGH;;;;;;8BAEH,6LAAC;;;;;;;;;;;;;;;;;AAIP,cAAc,WAAW,GAAG,qKAAA,CAAA,UAAuB,CAAC,WAAW;AAE/D,MAAM,4BAAc,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,qKAAA,CAAA,QAAqB;QACpB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,0CAA0C;QACvD,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,qKAAA,CAAA,QAAqB,CAAC,WAAW;AAE3D,MAAM,2BAAa,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGhC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,6LAAC,qKAAA,CAAA,OAAoB;QACnB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,6NACA;QAED,GAAG,KAAK;;0BAET,6LAAC;gBAAK,WAAU;0BACd,cAAA,6LAAC,qKAAA,CAAA,gBAA6B;8BAC5B,cAAA,6LAAC,uMAAA,CAAA,QAAK;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAIrB,6LAAC,qKAAA,CAAA,WAAwB;0BAAE;;;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG,qKAAA,CAAA,OAAoB,CAAC,WAAW;AAEzD,MAAM,gCAAkB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,SAGrC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,qKAAA,CAAA,YAAyB;QACxB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,4BAA4B;QACzC,GAAG,KAAK;;;;;;;AAGb,gBAAgB,WAAW,GAAG,qKAAA,CAAA,YAAyB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 816, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/switch.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n"],"names":[],"mappings":";;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,uBAAS,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAG5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,qKAAA,CAAA,OAAqB;QACpB,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,sXACA;QAED,GAAG,KAAK;QACT,KAAK;kBAEL,cAAA,6LAAC,qKAAA,CAAA,QAAsB;YACrB,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV;;;;;;;;;;;;AAKR,OAAO,WAAW,GAAG,qKAAA,CAAA,OAAqB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 859, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/checkbox.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,yBAAW,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAG9B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,uKAAA,CAAA,OAAsB;QACrB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,kTACA;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,uKAAA,CAAA,YAA2B;YAC1B,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE;sBAEd,cAAA,6LAAC,uMAAA,CAAA,QAAK;gBAAC,WAAU;;;;;;;;;;;;;;;;;AAIvB,SAAS,WAAW,GAAG,uKAAA,CAAA,OAAsB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 911, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/types/aiSettings.ts"],"sourcesContent":["\nimport { z } from 'zod';\n\nexport const AI_AGENT_BEHAVIORS = [\n  \"Ramah & Membantu\",\n  \"Profesional & To-the-point\",\n  \"Humoris & Santai\",\n  \"Empatik & Sabar\",\n] as const;\nexport type AiAgentBehavior = typeof AI_AGENT_BEHAVIORS[number];\n\nexport const AI_TRANSFER_CONDITIONS = [\n  \"Pelanggan Meminta Secara Eksplisit\",\n  \"AI Tidak Menemukan Jawaban (Setelah 2x Coba)\", // Programmatic check for this is complex currently\n  \"Terdeteksi Emosi Negatif dari Pelanggan\", // Needs sentiment analysis\n  \"Disebut Kata Kunci Eskalasi (mis. 'manajer', 'komplain')\",\n  \"Setelah 5 Pertanyaan Tanpa Solusi\", // Programmatic check for this is complex currently\n] as const;\nexport type AiTransferCondition = typeof AI_TRANSFER_CONDITIONS[number];\n\nconst FollowUpDelaysSchema = z.object({\n  firstAttemptHours: z.preprocess(\n    (val) => (val === \"\" || val === undefined || val === null) ? undefined : parseInt(String(val), 10),\n    z.number({ invalid_type_error: \"Jam harus angka.\"}).min(1, \"Minimal 1 jam.\").max(168, \"Maksimal 168 jam (7 hari).\").optional()\n  ),\n  secondAttemptDays: z.preprocess(\n    (val) => (val === \"\" || val === undefined || val === null) ? undefined : parseInt(String(val), 10),\n    z.number({ invalid_type_error: \"Hari harus angka.\"}).min(1, \"Minimal 1 hari.\").max(30, \"Maksimal 30 hari.\").optional()\n  ),\n  thirdAttemptDays: z.preprocess(\n    (val) => (val === \"\" || val === undefined || val === null) ? undefined : parseInt(String(val), 10),\n    z.number({ invalid_type_error: \"Hari harus angka.\"}).min(1, \"Minimal 1 hari.\").max(30, \"Maksimal 30 hari.\").optional()\n  ),\n  fourthAttemptDays: z.preprocess(\n    (val) => (val === \"\" || val === undefined || val === null) ? undefined : parseInt(String(val), 10),\n    z.number({ invalid_type_error: \"Hari harus angka.\"}).min(1, \"Minimal 1 hari.\").max(90, \"Maksimal 90 hari.\").optional()\n  ),\n});\n\nexport const AiSettingsFormSchema = z.object({\n  agentBehavior: z.enum(AI_AGENT_BEHAVIORS, {\n    required_error: \"Perilaku agen AI harus dipilih.\",\n  }),\n  welcomeMessage: z.string().min(10, \"Pesan selamat datang minimal 10 karakter.\").max(300, \"Pesan selamat datang maksimal 300 karakter.\"),\n  transferConditions: z.array(z.enum(AI_TRANSFER_CONDITIONS)).min(1, \"Minimal satu kondisi transfer harus dipilih.\"),\n  knowledgeBaseDescription: z.string().max(10000, \"Deskripsi sumber pengetahuan maksimal 10000 karakter.\").optional().describe(\"Panduan tingkat tinggi untuk AI. Detail pengetahuan akan diambil melalui tools.\"),\n  \n  enableHumanHandoff: z.boolean().default(false).describe(\"Aktifkan notifikasi ke agen manusia jika AI perlu bantuan.\"),\n  humanAgentWhatsAppNumber: z.string().regex(/^\\+?[0-9\\s-]{10,18}$|^$/, \"Format nomor WhatsApp agen tidak valid (mis. +628123456789 atau kosong).\").optional().describe(\"Nomor WhatsApp agen manusia untuk notifikasi handoff.\"),\n\n  enableFollowUp: z.boolean().default(false).describe(\"Aktifkan fitur follow-up otomatis untuk pelanggan yang pernah menghubungi via WhatsApp namun belum melakukan kunjungan atau transaksi. Follow-up berhenti jika pelanggan tercatat datang/bertransaksi.\"),\n  followUpMessageTemplate: z.string().max(300, \"Template pesan follow-up maksimal 300 karakter.\").optional(),\n  followUpDelays: FollowUpDelaysSchema.optional(),\n}).superRefine((data, ctx) => {\n  if (data.enableFollowUp) {\n    if (!data.followUpMessageTemplate || data.followUpMessageTemplate.trim() === \"\") {\n      ctx.addIssue({\n        code: z.ZodIssueCode.custom,\n        message: \"Template pesan follow-up diperlukan jika fitur follow-up aktif.\",\n        path: [\"followUpMessageTemplate\"],\n      });\n    }\n    if (!data.followUpDelays?.firstAttemptHours) {\n      ctx.addIssue({\n        code: z.ZodIssueCode.custom,\n        message: \"Penundaan follow-up pertama (jam) diperlukan.\",\n        path: [\"followUpDelays\", \"firstAttemptHours\"],\n      });\n    }\n  }\n  if (data.enableHumanHandoff && (!data.humanAgentWhatsAppNumber || data.humanAgentWhatsAppNumber.trim() === \"\")) {\n    ctx.addIssue({\n      code: z.ZodIssueCode.custom,\n      message: \"Nomor WhatsApp Agen Manusia diperlukan jika notifikasi handoff aktif.\",\n      path: [\"humanAgentWhatsAppNumber\"],\n    });\n  }\n});\n\nexport type AiSettingsFormValues = z.infer<typeof AiSettingsFormSchema>;\nexport type FollowUpDelaysValues = z.infer<typeof FollowUpDelaysSchema>;\n\n\nexport const DEFAULT_AI_SETTINGS: AiSettingsFormValues = {\n  agentBehavior: \"Humoris & Santai\",\n  welcomeMessage: \"Selamat datang di QLAB Auto Detailing! Ada yang bisa saya bantu hari ini?\",\n  transferConditions: [\"Pelanggan Meminta Secara Eksplisit\", \"AI Tidak Menemukan Jawaban (Setelah 2x Coba)\"],\n  knowledgeBaseDescription: `Anda adalah asisten AI untuk QLAB Auto Detailing. Tugas utama Anda adalah membantu pelanggan dan staf. Gunakan tools yang tersedia untuk mencari informasi produk, layanan, klien, atau detail dari knowledge base. Prioritaskan penggunaan 'getKnowledgeBaseInfoTool' untuk pertanyaan umum atau detail kebijakan, dan 'getProductServiceDetailsByNameTool' untuk harga/durasi spesifik.`,\n  \n  enableHumanHandoff: false,\n  humanAgentWhatsAppNumber: '',\n\n  enableFollowUp: false,\n  followUpMessageTemplate: \"Halo Kak, kami perhatikan Anda sempat menghubungi kami beberapa waktu lalu. Apakah ada rencana untuk berkunjung ke bengkel kami? Ada promo menarik lho!\",\n  followUpDelays: {\n    firstAttemptHours: 24,\n    secondAttemptDays: 7,\n    thirdAttemptDays: 7,\n    fourthAttemptDays: 30,\n  },\n};\n    \n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1023, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/dialog.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,SAAS,qKAAA,CAAA,OAAoB;AAEnC,MAAM,gBAAgB,qKAAA,CAAA,UAAuB;AAE7C,MAAM,eAAe,qKAAA,CAAA,SAAsB;AAE3C,MAAM,cAAc,qKAAA,CAAA,QAAqB;AAEzC,MAAM,8BAAgB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,EAGnC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,qKAAA,CAAA,UAAuB;QACtB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,0JACA;QAED,GAAG,KAAK;;;;;;KAVP;AAaN,cAAc,WAAW,GAAG,qKAAA,CAAA,UAAuB,CAAC,WAAW;AAE/D,MAAM,8BAAgB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGnC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,6LAAC;;0BACC,6LAAC;;;;;0BACD,6LAAC,qKAAA,CAAA,UAAuB;gBACtB,KAAK;gBACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,+fACA;gBAED,GAAG,KAAK;;oBAER;kCACD,6LAAC,qKAAA,CAAA,QAAqB;wBAAC,WAAU;;0CAC/B,6LAAC,+LAAA,CAAA,IAAC;gCAAC,WAAU;;;;;;0CACb,6LAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;;AAKlC,cAAc,WAAW,GAAG,qKAAA,CAAA,UAAuB,CAAC,WAAW;AAE/D,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,6LAAC;QACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,sDACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,aAAa,WAAW,GAAG;AAE3B,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,6LAAC;QACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,iEACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,aAAa,WAAW,GAAG;AAE3B,MAAM,4BAAc,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,qKAAA,CAAA,QAAqB;QACpB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,qDACA;QAED,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,qKAAA,CAAA,QAAqB,CAAC,WAAW;AAE3D,MAAM,kCAAoB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGvC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,qKAAA,CAAA,cAA2B;QAC1B,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,kBAAkB,WAAW,GAAG,qKAAA,CAAA,cAA2B,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 1174, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/ai-cs-assistant/page.tsx"],"sourcesContent":["\n\"use client\";\n\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\nimport AppHeader from '@/components/layout/AppHeader';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle, CardFooter } from '@/components/ui/card';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Label } from '@/components/ui/label';\nimport { Loader2, MessageSquareText, Sparkles, Copy, Send, User, Search, Bot, MessageCircle, ThumbsUp, ThumbsDown, Edit2, ShieldAlert, BrainCircuit, PhoneForwarded, Info, Settings } from 'lucide-react'; // Added Settings icon\nimport { useToast } from '@/hooks/use-toast';\nimport { generateWhatsAppReply } from '@/ai/flows/cs-whatsapp-reply-flow';\nimport type { WhatsAppReplyOutput, ChatMessage } from '@/types/ai/cs-whatsapp-reply';\nimport { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';\nimport { Input } from '@/components/ui/input';\nimport { ScrollArea } from '@/components/ui/scroll-area';\nimport { Separator } from '@/components/ui/separator';\nimport { db } from '@/lib/firebase';\nimport { collection, getDocs, query, orderBy, type Timestamp, onSnapshot, addDoc, serverTimestamp, where, limit, setDoc, doc, getDoc as getFirestoreDoc } from 'firebase/firestore';\nimport type { Client } from '@/types/client';\nimport type { DirectMessage } from '@/types/directMessage';\nimport { cn } from '@/lib/utils';\nimport { v4 as uuidv4 } from 'uuid';\n\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage, FormDescription } from '@/components/ui/form';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Switch } from '@/components/ui/switch';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport {\n  AiSettingsFormSchema,\n  type AiSettingsFormValues,\n  DEFAULT_AI_SETTINGS,\n  AI_AGENT_BEHAVIORS,\n  AI_TRANSFER_CONDITIONS,\n  type FollowUpDelaysValues,\n} from '@/types/aiSettings';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\";\n\n\ninterface ChatMessageUi extends Omit<DirectMessage, 'timestamp' | 'id'> {\n  id: string;\n  timestamp: string;\n}\n\ninterface PlaygroundMessage {\n  id: string;\n  sender: 'user' | 'ai';\n  text: string;\n  timestamp: string;\n  feedback?: 'good' | 'bad' | null;\n  correction?: string;\n  isEditingCorrection?: boolean;\n  currentCorrectionText?: string;\n}\n\ninterface Customer {\n  id: string;\n  name: string;\n  avatarUrl?: string;\n  lastMessageTimestamp: string;\n  lastMessage: string;\n  unreadCount: number;\n  phone?: string;\n}\n\nfunction formatPhoneNumberForMatching(number?: string): string {\n  if (!number || typeof number !== 'string' || number.trim() === '') {\n    return '';\n  }\n  let cleaned = number.replace(/\\D/g, '');\n  if (cleaned.startsWith('0')) {\n    cleaned = '62' + cleaned.substring(1);\n  } else if (cleaned.startsWith('8') && cleaned.length >= 9 && cleaned.length <= 13 && /^\\d+$/.test(cleaned)) {\n    cleaned = '62' + cleaned;\n  } else if (!cleaned.startsWith('62') && /^\\d{9,13}$/.test(cleaned) && !cleaned.startsWith('+')) {\n    cleaned = '62' + cleaned;\n  }\n  if (cleaned.startsWith('62') && cleaned.length >= 10) {\n    return cleaned;\n  }\n  return '';\n}\n\nexport default function AiCsAssistantPage() {\n  const [customerMessageInput, setCustomerMessageInput] = useState('');\n  const [currentPlaygroundInput, setCurrentPlaygroundInput] = useState('');\n  const [playgroundChatHistory, setPlaygroundChatHistory] = useState<PlaygroundMessage[]>([]);\n  const [isLoadingPlaygroundSuggestion, setIsLoadingPlaygroundSuggestion] = useState(false);\n\n  const { toast } = useToast();\n\n  const [customers, setCustomers] = useState<Customer[]>([]);\n  const [loadingCustomers, setLoadingCustomers] = useState(true);\n  const [selectedCustomer, setSelectedCustomer] = useState<Customer | null>(null);\n  const [chatHistory, setChatHistory] = useState<ChatMessageUi[]>([]);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [isPlaygroundMode, setIsPlaygroundMode] = useState(false);\n  const [isSendingWhatsApp, setIsSendingWhatsApp] = useState(false);\n\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const playgroundMessagesEndRef = useRef<HTMLDivElement>(null);\n  const unsubscribeChatRef = useRef<(() => void) | null>(null);\n\n  // AI Settings State & Form\n  const [isAiSettingsDialogOpen, setIsAiSettingsDialogOpen] = useState(false);\n  const [isLoadingAiSettings, setIsLoadingAiSettings] = useState(true);\n  const [isSavingAiSettings, setIsSavingAiSettings] = useState(false);\n  const aiSettingsForm = useForm<AiSettingsFormValues>({\n    resolver: zodResolver(AiSettingsFormSchema),\n    defaultValues: DEFAULT_AI_SETTINGS,\n  });\n  const watchedEnableFollowUp = aiSettingsForm.watch('enableFollowUp');\n  const watchedEnableHumanHandoff = aiSettingsForm.watch('enableHumanHandoff');\n\n  const fetchAiAgentSettings = useCallback(async () => {\n    setIsLoadingAiSettings(true);\n    try {\n      const settingsDocRef = doc(db, 'appSettings', 'aiAgentConfig');\n      const docSnap = await getFirestoreDoc(settingsDocRef);\n      if (docSnap.exists()) {\n        const data = docSnap.data();\n        const followUpDelaysWithDefaults = {\n          ...DEFAULT_AI_SETTINGS.followUpDelays,\n          ...(data.followUpDelays || {}),\n        };\n        aiSettingsForm.reset({\n          ...DEFAULT_AI_SETTINGS,\n          ...data,\n          followUpDelays: followUpDelaysWithDefaults,\n          humanAgentWhatsAppNumber: data.humanAgentWhatsAppNumber || '',\n        } as AiSettingsFormValues);\n      } else {\n        aiSettingsForm.reset(DEFAULT_AI_SETTINGS);\n      }\n    } catch (error) {\n      console.error(\"Error fetching AI agent settings: \", error);\n      toast({ title: \"Error\", description: \"Gagal memuat pengaturan agen AI.\", variant: \"destructive\" });\n      aiSettingsForm.reset(DEFAULT_AI_SETTINGS);\n    } finally {\n      setIsLoadingAiSettings(false);\n    }\n  }, [aiSettingsForm, toast]);\n\n  const handleSaveAiAgentSettings = async (data: AiSettingsFormValues) => {\n    setIsSavingAiSettings(true);\n    try {\n      const settingsDocRef = doc(db, 'appSettings', 'aiAgentConfig');\n      const dataToSave = { ...data };\n      if (data.enableFollowUp) {\n        dataToSave.followUpDelays = data.followUpDelays || DEFAULT_AI_SETTINGS.followUpDelays;\n      }\n      if (!data.enableHumanHandoff) {\n        dataToSave.humanAgentWhatsAppNumber = '';\n      }\n      await setDoc(settingsDocRef, { ...dataToSave, updatedAt: serverTimestamp() }, { merge: true });\n      toast({ title: \"Sukses\", description: \"Pengaturan Agen AI berhasil disimpan.\" });\n      setIsAiSettingsDialogOpen(false); // Close dialog on save\n    } catch (error) {\n      console.error(\"Error saving AI agent settings: \", error);\n      toast({ title: \"Error\", description: \"Gagal menyimpan pengaturan Agen AI.\", variant: \"destructive\" });\n    } finally {\n      setIsSavingAiSettings(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchAiAgentSettings();\n  }, [fetchAiAgentSettings]);\n\n\n  const scrollToBottom = (ref: React.RefObject<HTMLDivElement>) => {\n    ref.current?.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  useEffect(() => {\n    if (!isPlaygroundMode && selectedCustomer && chatHistory.length > 0) {\n      scrollToBottom(messagesEndRef);\n    }\n  }, [chatHistory, selectedCustomer, isPlaygroundMode]);\n\n  useEffect(() => {\n    if (isPlaygroundMode && playgroundChatHistory.length > 0) {\n      scrollToBottom(playgroundMessagesEndRef);\n    }\n  }, [playgroundChatHistory, isPlaygroundMode]);\n\n\n  const fetchCustomers = useCallback(async (): Promise<Customer[]> => {\n    console.log(\"Fetching actual customers from Firestore...\");\n    try {\n      const clientsCollectionRef = collection(db, 'clients');\n      const q = query(clientsCollectionRef, orderBy(\"name\"));\n      const querySnapshot = await getDocs(q);\n      const clientsData = querySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() } as Client));\n\n      return clientsData.map(client => ({\n        id: client.id,\n        name: client.name,\n        avatarUrl: client.photoUrl || `https://placehold.co/40x40.png?text=${client.name.charAt(0)}`,\n        lastMessageTimestamp: client.lastVisit || 'N/A',\n        lastMessage: 'Klik untuk melihat chat...',\n        unreadCount: 0,\n        phone: client.phone,\n      }));\n    } catch (error) {\n      console.error(\"Error fetching customers from Firestore: \", error);\n      toast({\n        title: \"Error Database\",\n        description: \"Gagal mengambil daftar pelanggan dari database.\",\n        variant: \"destructive\",\n      });\n      return [];\n    }\n  }, [toast]);\n\n  useEffect(() => {\n    const loadInitialData = async () => {\n      setLoadingCustomers(true);\n      try {\n        const fetchedCustomers = await fetchCustomers();\n        setCustomers(fetchedCustomers);\n      } catch (error) {\n        console.error(\"Failed to fetch customers:\", error);\n      } finally {\n        setLoadingCustomers(false);\n      }\n    };\n    loadInitialData();\n  }, [fetchCustomers]);\n\n  useEffect(() => {\n    if (unsubscribeChatRef.current) {\n      unsubscribeChatRef.current();\n      unsubscribeChatRef.current = null;\n    }\n\n    if (selectedCustomer && !isPlaygroundMode) {\n      const phoneToQuery = formatPhoneNumberForMatching(selectedCustomer.phone);\n\n      if (phoneToQuery) {\n        const messagesRef = collection(db, 'directMessages');\n        const q = query(\n          messagesRef,\n          where(\"senderNumber\", \"==\", phoneToQuery),\n          orderBy(\"timestamp\", \"asc\")\n        );\n\n        unsubscribeChatRef.current = onSnapshot(q, (querySnapshot) => {\n          const history: ChatMessageUi[] = [];\n          querySnapshot.forEach((doc) => {\n            const data = doc.data() as DirectMessage;\n            history.push({\n              ...data,\n              id: doc.id,\n              timestamp: data.timestamp?.toDate().toLocaleTimeString('id-ID', { hour: '2-digit', minute: '2-digit' }) || 'N/A',\n            });\n          });\n          setChatHistory(history);\n        }, (error) => {\n          console.error(`Error fetching real-time chat for ${selectedCustomer.name} (phone: ${phoneToQuery}):`, error);\n          toast({\n            title: \"Error Real-time Chat\",\n            description: \"Gagal memuat pesan secara real-time.\",\n            variant: \"destructive\",\n          });\n        });\n      } else {\n        setChatHistory([]);\n        if (selectedCustomer.phone) {\n          console.warn(`Nomor telepon pelanggan \"${selectedCustomer.name}\" (${selectedCustomer.phone}) tidak valid atau tidak dapat diformat untuk query.`);\n           toast({ title: \"Info Pelanggan\", description: `Nomor HP ${selectedCustomer.name} (${selectedCustomer.phone}) tidak dapat diformat, riwayat chat mungkin tidak tampil.`, variant: \"default\"});\n        }\n      }\n    } else {\n      setChatHistory([]);\n    }\n\n    return () => {\n      if (unsubscribeChatRef.current) {\n        unsubscribeChatRef.current();\n      }\n    };\n  }, [selectedCustomer, toast, isPlaygroundMode]);\n\n\n  const handleSelectPlayground = () => {\n    setIsPlaygroundMode(true);\n    setSelectedCustomer(null);\n    setCustomerMessageInput('');\n    setCurrentPlaygroundInput('');\n    setPlaygroundChatHistory([]);\n    if (unsubscribeChatRef.current) {\n      unsubscribeChatRef.current();\n      unsubscribeChatRef.current = null;\n    }\n  };\n\n  const handleCustomerSelect = async (customer: Customer) => {\n    setIsPlaygroundMode(false);\n    setSelectedCustomer(customer);\n    setCustomerMessageInput('');\n  };\n\n  const handleSendPlaygroundMessage = async () => {\n    if (!currentPlaygroundInput.trim()) {\n      toast({\n        title: \"Input Kosong\",\n        description: \"Mohon masukkan pertanyaan untuk AI.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    const userMessageText = currentPlaygroundInput.trim();\n    const userMessage: PlaygroundMessage = {\n      id: uuidv4(),\n      sender: 'user',\n      text: userMessageText,\n      timestamp: new Date().toLocaleTimeString('id-ID', { hour: '2-digit', minute: '2-digit' }),\n    };\n\n    const updatedPlaygroundHistory = [...playgroundChatHistory, userMessage];\n    setPlaygroundChatHistory(updatedPlaygroundHistory);\n    setCurrentPlaygroundInput('');\n    setIsLoadingPlaygroundSuggestion(true);\n\n    const genkitChatHistory: ChatMessage[] = updatedPlaygroundHistory\n      .slice(0, -1)\n      .map(msg => ({\n        role: msg.sender === 'user' ? 'user' : 'model',\n        content: msg.text,\n      }));\n\n    try {\n      const result: WhatsAppReplyOutput = await generateWhatsAppReply({\n        customerMessage: userMessageText,\n        chatHistory: genkitChatHistory,\n      });\n\n      const aiMessage: PlaygroundMessage = {\n        id: uuidv4(),\n        sender: 'ai',\n        text: result.suggestedReply,\n        timestamp: new Date().toLocaleTimeString('id-ID', { hour: '2-digit', minute: '2-digit' }),\n        feedback: null,\n        currentCorrectionText: result.suggestedReply,\n      };\n      setPlaygroundChatHistory(prev => [...prev, aiMessage]);\n\n    } catch (error) {\n      console.error(\"Error generating AI reply for playground:\", error);\n      const errorMessage: PlaygroundMessage = {\n        id: uuidv4(),\n        sender: 'ai',\n        text: \"Maaf, terjadi kesalahan saat menghubungi AI. Silakan coba lagi.\",\n        timestamp: new Date().toLocaleTimeString('id-ID', { hour: '2-digit', minute: '2-digit' }),\n      };\n      setPlaygroundChatHistory(prev => [...prev, errorMessage]);\n      toast({\n        title: \"Error AI\",\n        description: \"Gagal mendapatkan respon dari AI.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsLoadingPlaygroundSuggestion(false);\n    }\n  };\n\n  const handlePlaygroundKeyDown = (event: React.KeyboardEvent<HTMLTextAreaElement>) => {\n    if (event.key === 'Enter' && !event.shiftKey) {\n      event.preventDefault();\n      handleSendPlaygroundMessage();\n    }\n  };\n\n  const handleSendMessage = async () => {\n    const customerPhone = selectedCustomer?.phone;\n    if (!customerMessageInput.trim() || !selectedCustomer || isPlaygroundMode || !customerPhone) {\n        toast({\n          title: \"Tidak Dapat Mengirim\",\n          description: \"Pesan kosong, pelanggan tidak dipilih, atau nomor HP pelanggan tidak tersedia.\",\n          variant: \"destructive\",\n        });\n        return;\n    }\n    \n    const formattedPhoneForSending = formatPhoneNumberForMatching(customerPhone);\n    if (!formattedPhoneForSending) {\n        toast({\n          title: \"Nomor Tidak Valid\",\n          description: `Nomor HP pelanggan \"${customerPhone}\" tidak dapat diformat dengan benar untuk pengiriman.`,\n          variant: \"destructive\",\n        });\n        return;\n    }\n\n    const textToSend = customerMessageInput.trim();\n    const originalInput = customerMessageInput;\n    setCustomerMessageInput('');\n    setIsSendingWhatsApp(true);\n\n    try {\n      const response = await fetch('/api/whatsapp/send', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ number: formattedPhoneForSending, message: textToSend }),\n      });\n      const result = await response.json();\n\n      if (response.ok && result.success) {\n        toast({\n          title: \"Pesan Terkirim ke WhatsApp\",\n          description: `Pesan Anda sedang dikirim ke ${selectedCustomer.name}.`,\n        });\n\n        const directMessagesRef = collection(db, 'directMessages');\n        const csMessageData: Omit<DirectMessage, 'id'> = {\n          customerId: selectedCustomer.id,\n          customerName: selectedCustomer.name,\n          senderNumber: formattedPhoneForSending,\n          text: textToSend,\n          sender: 'user',\n          timestamp: serverTimestamp() as any,\n          read: true,\n        };\n        await addDoc(directMessagesRef, csMessageData);\n        console.log(\"CS manual reply saved to directMessages.\");\n\n        try {\n            const lockResponse = await fetch('/api/whatsapp/set-intervention-lock', {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({ senderNumber: formattedPhoneForSending }),\n            });\n            const lockResult = await lockResponse.json();\n            if (lockResponse.ok && lockResult.success) {\n                console.log(`AI lock set for ${formattedPhoneForSending} via API call from UI.`);\n            } else {\n                console.warn(`Failed to set AI lock for ${formattedPhoneForSending} via API: ${lockResult.error}`);\n            }\n        } catch (lockError) {\n            console.error(`Error calling set-intervention-lock API from UI:`, lockError);\n        }\n\n      } else {\n        throw new Error(result.error || 'Gagal mengirim pesan via server lokal.');\n      }\n    } catch (error) {\n      console.error(\"Error sending WhatsApp message or saving to DB:\", error);\n      toast({\n        title: \"Gagal Mengirim Pesan\",\n        description: error instanceof Error ? error.message : \"Terjadi kesalahan.\",\n        variant: \"destructive\",\n      });\n      setCustomerMessageInput(originalInput);\n    } finally {\n      setIsSendingWhatsApp(false);\n    }\n  };\n\n  const handleKeyDown = (event: React.KeyboardEvent<HTMLTextAreaElement>) => {\n    if (event.key === 'Enter' && !event.shiftKey && !isPlaygroundMode && selectedCustomer) {\n      event.preventDefault();\n      handleSendMessage();\n    }\n  };\n\n  const handleSetManualLock = async () => {\n    if (!selectedCustomer || !selectedCustomer.phone) {\n      toast({ title: \"Info\", description: \"Pilih pelanggan dengan nomor HP untuk mengaktifkan lock AI.\", variant: \"default\" });\n      return;\n    }\n    const formattedPhoneForLock = formatPhoneNumberForMatching(selectedCustomer.phone);\n    if (!formattedPhoneForLock) {\n      toast({ title: \"Nomor Tidak Valid\", description: `Nomor HP pelanggan \"${selectedCustomer.phone}\" tidak dapat diformat.`, variant: \"destructive\" });\n      return;\n    }\n\n    setIsSendingWhatsApp(true);\n    try {\n      const response = await fetch('/api/whatsapp/set-intervention-lock', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ senderNumber: formattedPhoneForLock }),\n      });\n      const result = await response.json();\n      if (response.ok && result.success) {\n        toast({ title: \"Lock AI Aktif\", description: `AI tidak akan merespons ${selectedCustomer.name} selama 1 jam.`, variant: \"default\" });\n      } else {\n        throw new Error(result.error || \"Gagal mengaktifkan lock AI.\");\n      }\n    } catch (error) {\n      console.error(\"Error manually setting AI lock:\", error);\n      toast({ title: \"Error Lock AI\", description: error instanceof Error ? error.message : \"Terjadi kesalahan.\", variant: \"destructive\" });\n    } finally {\n      setIsSendingWhatsApp(false);\n    }\n  };\n\n  const handlePlaygroundFeedback = (messageId: string, feedback: 'good' | 'bad') => {\n    setPlaygroundChatHistory(prevHistory =>\n      prevHistory.map(msg =>\n        msg.id === messageId\n          ? { ...msg, feedback, isEditingCorrection: feedback === 'bad' && !msg.correction, currentCorrectionText: msg.currentCorrectionText ?? msg.text }\n          : msg\n      )\n    );\n  };\n\n  const handlePlaygroundCorrectionChange = (messageId: string, text: string) => {\n    setPlaygroundChatHistory(prevHistory =>\n      prevHistory.map(msg =>\n        msg.id === messageId ? { ...msg, currentCorrectionText: text } : msg\n      )\n    );\n  };\n\n  const handleSavePlaygroundCorrection = (messageId: string) => {\n    setPlaygroundChatHistory(prevHistory =>\n      prevHistory.map(msg =>\n        msg.id === messageId\n          ? { ...msg, correction: msg.currentCorrectionText, isEditingCorrection: false }\n          : msg\n      )\n    );\n    toast({ title: \"Koreksi Disimpan\", description: \"Feedback Anda telah dicatat.\", variant: \"default\" });\n  };\n\n\n  const filteredCustomers = customers.filter(customer =>\n    customer.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    (customer.phone && customer.phone.includes(searchTerm))\n  );\n\n\n  return (\n    <div className=\"flex flex-col h-full bg-background\">\n      <AppHeader title=\"Asisten CS AI untuk WhatsApp\" />\n      <div className=\"flex-1 grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 overflow-hidden\">\n\n        {/* Kolom Daftar Pelanggan & Playground */}\n        <div className=\"col-span-1 md:col-span-1 lg:col-span-1 border-r border-border bg-card flex flex-col\">\n          <CardHeader className=\"p-4\">\n            <CardTitle className=\"text-lg flex items-center\">\n              <User className=\"mr-2 h-5 w-5\" /> Daftar Pelanggan\n            </CardTitle>\n            <div className=\"relative mt-2\">\n              <Search className=\"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground\" />\n              <Input\n                type=\"search\"\n                placeholder=\"Cari pelanggan (nama/HP)...\"\n                className=\"pl-8 w-full h-9\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n              />\n            </div>\n          </CardHeader>\n\n          <div\n            key=\"ai-playground\"\n            className={cn(\n              \"p-3 hover:bg-muted cursor-pointer border-b border-t border-border\",\n              isPlaygroundMode ? 'bg-accent text-accent-foreground' : ''\n            )}\n            onClick={handleSelectPlayground}\n          >\n            <div className=\"flex items-center space-x-3\">\n              <Avatar className={cn(\n                \"h-9 w-9 flex items-center justify-center\",\n                isPlaygroundMode ? \"bg-accent-foreground text-accent\" : \"bg-primary/10 text-primary\"\n              )}>\n                <Bot className=\"h-5 w-5\" />\n              </Avatar>\n              <div className=\"flex-1 min-w-0\">\n                <p className=\"text-sm font-medium truncate\">AI Playground</p>\n                <p className=\"text-xs text-muted-foreground truncate\">Uji coba AI tanpa pelanggan.</p>\n              </div>\n            </div>\n          </div>\n          <ScrollArea className=\"flex-grow\">\n            <CardContent className=\"p-0\">\n              {loadingCustomers ? (\n                <div className=\"p-4 text-center text-muted-foreground\">\n                  <Loader2 className=\"h-6 w-6 animate-spin mx-auto my-4\" />\n                  Memuat pelanggan...\n                </div>\n              ) : filteredCustomers.length === 0 && searchTerm ? (\n                 <p className=\"p-4 text-center text-muted-foreground\">\n                  Pelanggan tidak ditemukan.\n                 </p>\n              ) : filteredCustomers.length === 0 && !searchTerm ? (\n                 <p className=\"p-4 text-center text-muted-foreground\">\n                  Belum ada pelanggan.\n                 </p>\n              ): (\n                filteredCustomers.map((customer) => (\n                  <div\n                    key={customer.id}\n                    className={`p-3 hover:bg-muted cursor-pointer border-b border-border last:border-b-0 ${selectedCustomer?.id === customer.id && !isPlaygroundMode ? 'bg-accent/20' : ''}`}\n                    onClick={() => handleCustomerSelect(customer)}\n                  >\n                    <div className=\"flex items-center space-x-3\">\n                      <Avatar className=\"h-9 w-9\">\n                        <AvatarImage src={customer.avatarUrl} alt={customer.name} data-ai-hint=\"avatar pelanggan\" />\n                        <AvatarFallback>{customer.name.charAt(0)}</AvatarFallback>\n                      </Avatar>\n                      <div className=\"flex-1 min-w-0\">\n                        <p className=\"text-sm font-medium truncate\">{customer.name}</p>\n                        <p className=\"text-xs text-muted-foreground truncate\">{customer.phone || 'No HP tidak ada'}</p>\n                      </div>\n                    </div>\n                  </div>\n                ))\n              )}\n            </CardContent>\n          </ScrollArea>\n        </div>\n\n        {/* Kolom Chat atau Playground View & AI Settings Button */}\n        <div className=\"col-span-1 md:col-span-2 lg:col-span-3 flex flex-col bg-background p-4 space-y-4 overflow-y-auto\">\n          {isPlaygroundMode ? (\n            <>\n              <Card className=\"flex-shrink-0\">\n                <CardHeader className=\"p-4 border-b\">\n                  <CardTitle className=\"text-lg flex items-center\"><Bot className=\"mr-2 h-6 w-6 text-primary\" /> AI Playground</CardTitle>\n                  <CardDescription>Uji coba langsung kemampuan AI. Berikan feedback untuk membantu AI belajar.</CardDescription>\n                </CardHeader>\n                <ScrollArea className=\"h-[400px] p-4 space-y-4\"> {/* Fixed height for chat */}\n                  {playgroundChatHistory.map((message) => (\n                    <div key={message.id}>\n                      <div\n                        className={`flex ${message.sender === 'user' ? 'justify-end' : 'justify-start'}`}\n                      >\n                        <div\n                          className={`max-w-xs lg:max-w-md px-4 py-2 rounded-xl shadow ${\n                            message.sender === 'user'\n                              ? 'bg-primary text-primary-foreground'\n                              : 'bg-secondary text-secondary-foreground'\n                          }`}\n                        >\n                          <p className=\"text-sm whitespace-pre-wrap\">{message.text}</p>\n                          <p className={`text-xs mt-1 ${message.sender === 'user' ? 'text-primary-foreground/80' : 'text-secondary-foreground/80'} text-right`}>\n                            {message.timestamp}\n                          </p>\n                        </div>\n                      </div>\n                      {message.sender === 'ai' && (\n                        <div className=\"flex justify-start mt-1.5 ml-1\">\n                          <Button\n                            variant=\"ghost\"\n                            size=\"icon\"\n                            className={cn(\"h-7 w-7 hover:bg-green-100 dark:hover:bg-green-800\", message.feedback === 'good' && \"bg-green-100 text-green-700 dark:bg-green-800 dark:text-green-300\")}\n                            onClick={() => handlePlaygroundFeedback(message.id, 'good')}\n                          >\n                            <ThumbsUp className=\"h-4 w-4\" />\n                          </Button>\n                          <Button\n                            variant=\"ghost\"\n                            size=\"icon\"\n                            className={cn(\"h-7 w-7 ml-1 hover:bg-red-100 dark:hover:bg-red-800\", message.feedback === 'bad' && \"bg-red-100 text-red-700 dark:bg-red-800 dark:text-red-300\")}\n                            onClick={() => handlePlaygroundFeedback(message.id, 'bad')}\n                          >\n                            <ThumbsDown className=\"h-4 w-4\" />\n                          </Button>\n                        </div>\n                      )}\n                      {message.sender === 'ai' && message.feedback === 'bad' && message.isEditingCorrection && !message.correction && (\n                        <div className=\"mt-2 ml-1 space-y-2 max-w-md\">\n                          <Textarea\n                            placeholder=\"Tulis koreksi Anda di sini...\"\n                            value={message.currentCorrectionText || ''}\n                            onChange={(e) => handlePlaygroundCorrectionChange(message.id, e.target.value)}\n                            rows={3}\n                            className=\"text-sm bg-background\"\n                          />\n                          <Button size=\"sm\" onClick={() => handleSavePlaygroundCorrection(message.id)} className=\"bg-accent text-accent-foreground hover:bg-accent/90\">\n                            <Edit2 className=\"mr-2 h-4 w-4\" /> Simpan Koreksi\n                          </Button>\n                        </div>\n                      )}\n                      {message.sender === 'ai' && message.correction && (\n                        <Card className=\"mt-2 ml-1 p-3 border-green-500 bg-green-50 dark:bg-green-900/30 max-w-md\">\n                          <p className=\"text-xs font-medium text-green-700 dark:text-green-300\">Koreksi Anda:</p>\n                          <p className=\"text-sm text-green-800 dark:text-green-200 whitespace-pre-wrap\">{message.correction}</p>\n                        </Card>\n                      )}\n                    </div>\n                  ))}\n                  {playgroundChatHistory.length === 0 && (\n                      <p className=\"text-center text-muted-foreground py-10\">Mulai percakapan dengan AI di bawah.</p>\n                  )}\n                  <div ref={playgroundMessagesEndRef} />\n                </ScrollArea>\n                <Separator />\n                <CardFooter className=\"p-4\">\n                  <div className=\"flex items-end space-x-2 w-full\">\n                    <Textarea\n                      id=\"playground-chat-input\"\n                      placeholder=\"Ketik pertanyaan atau skenario Anda...\"\n                      value={currentPlaygroundInput}\n                      onChange={(e) => setCurrentPlaygroundInput(e.target.value)}\n                      onKeyDown={handlePlaygroundKeyDown}\n                      rows={2}\n                      disabled={isLoadingPlaygroundSuggestion}\n                      className=\"bg-background flex-1 resize-none\"\n                    />\n                    <Button\n                      size=\"icon\"\n                      onClick={handleSendPlaygroundMessage}\n                      disabled={isLoadingPlaygroundSuggestion || !currentPlaygroundInput.trim()}\n                      className=\"h-10 w-10 shrink-0\"\n                      aria-label=\"Kirim Pesan ke AI\"\n                    >\n                      {isLoadingPlaygroundSuggestion ? <Loader2 className=\"h-5 w-5 animate-spin\" /> : <Send className=\"h-5 w-5\" />}\n                    </Button>\n                  </div>\n                </CardFooter>\n              </Card>\n            </>\n          ) : !selectedCustomer ? (\n            <div className=\"flex-1 flex flex-col items-center justify-center text-center p-6\">\n              <MessageSquareText className=\"h-16 w-16 text-muted-foreground mb-4\" />\n              <p className=\"text-xl text-muted-foreground\">Pilih pelanggan untuk memulai percakapan</p>\n              <p className=\"text-sm text-muted-foreground\">atau masuk ke mode Playground AI dari daftar di samping.</p>\n            </div>\n          ) : (\n            <>\n              <Card className=\"flex-shrink-0\">\n                <CardHeader className=\"p-4 border-b\">\n                  <div className=\"flex justify-between items-center\">\n                      <div>\n                          <CardTitle className=\"text-lg flex items-center\">\n                          Percakapan dengan: {selectedCustomer.name}\n                          </CardTitle>\n                          <CardDescription>{selectedCustomer.phone || \"Nomor HP tidak tersedia\"}</CardDescription>\n                      </div>\n                      <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          onClick={handleSetManualLock}\n                          disabled={isSendingWhatsApp || !selectedCustomer.phone}\n                          title=\"Aktifkan lock AI selama 1 jam (jika Anda baru balas dari HP)\"\n                      >\n                          <ShieldAlert className=\"mr-2 h-4 w-4\" />\n                          Ambil Alih (Lock AI 1 Jam)\n                      </Button>\n                  </div>\n                </CardHeader>\n                <ScrollArea className=\"h-[400px] p-4 space-y-4\">\n                  {chatHistory.map((message) => (\n                    <div\n                      key={message.id}\n                      className={`flex ${message.sender === 'customer' ? 'justify-start' : 'justify-end'}`}\n                    >\n                      <div\n                        className={`max-w-xs lg:max-w-md px-4 py-2 rounded-xl shadow ${\n                          message.sender === 'customer'\n                            ? 'bg-muted text-muted-foreground'\n                            : message.sender === 'user'\n                              ? 'bg-primary text-primary-foreground'\n                              : 'bg-secondary text-secondary-foreground'\n                        }`}\n                      >\n                        <p className=\"text-sm whitespace-pre-wrap\">{message.text}</p>\n                        <p className={`text-xs mt-1 ${\n                          message.sender === 'customer' ? 'text-muted-foreground/80'\n                          : message.sender === 'user' ? 'text-primary-foreground/80'\n                          : 'text-secondary-foreground/80'\n                          } text-right`}>\n                          {message.timestamp} {message.sender === 'ai' && '(AI Otomatis)'}\n                        </p>\n                      </div>\n                    </div>\n                  ))}\n                  {chatHistory.length === 0 && (\n                      <p className=\"text-center text-muted-foreground py-10\">Belum ada riwayat chat untuk pelanggan ini.</p>\n                  )}\n                  <div ref={messagesEndRef} />\n                </ScrollArea>\n                <Separator />\n                <Card className=\"rounded-none border-0 border-t shadow-none\">\n                  <CardHeader className=\"p-4\">\n                    <CardTitle className=\"text-lg flex items-center\">\n                      <MessageCircle className=\"mr-2 h-5 w-5 text-primary\" />\n                      Balas Pesan Pelanggan\n                    </CardTitle>\n                  </CardHeader>\n                  <CardContent className=\"p-4\">\n                    <div className=\"flex items-end space-x-2\">\n                      <Textarea\n                        id=\"customer-message-input\"\n                        placeholder=\"Ketik balasan Anda di sini...\"\n                        value={customerMessageInput}\n                        onChange={(e) => setCustomerMessageInput(e.target.value)}\n                        onKeyDown={handleKeyDown}\n                        rows={3}\n                        disabled={isSendingWhatsApp || !selectedCustomer?.phone}\n                        className=\"bg-background flex-1 resize-none\"\n                      />\n                      <Button\n                        size=\"icon\"\n                        onClick={handleSendMessage}\n                        disabled={isSendingWhatsApp || !customerMessageInput.trim() || !selectedCustomer?.phone}\n                        className=\"h-10 w-10 shrink-0\"\n                        aria-label=\"Kirim Pesan Manual\"\n                      >\n                        {isSendingWhatsApp ? <Loader2 className=\"h-5 w-5 animate-spin\" /> : <Send className=\"h-5 w-5\" />}\n                      </Button>\n                    </div>\n                    {!selectedCustomer?.phone && (\n                          <p className=\"text-xs text-destructive mt-1\">Nomor HP pelanggan tidak tersedia untuk pengiriman WhatsApp.</p>\n                        )}\n                  </CardContent>\n                </Card>\n              </Card>\n            </>\n          )}\n          \n          {/* AI Settings Dialog Trigger */}\n          <div className=\"mt-auto p-4 flex justify-start\"> {/* Changed to justify-start */}\n            <Dialog open={isAiSettingsDialogOpen} onOpenChange={setIsAiSettingsDialogOpen}>\n              <DialogTrigger asChild>\n                <Button variant=\"outline\">\n                  <Settings className=\"mr-2 h-4 w-4\" /> Pengaturan Agen AI\n                </Button>\n              </DialogTrigger>\n              <DialogContent className=\"max-w-3xl max-h-[90vh] overflow-y-auto p-0\">\n                <Card className=\"shadow-none border-none\">\n                  <CardHeader className=\"p-6\">\n                    <CardTitle className=\"flex items-center\"><BrainCircuit className=\"mr-2 h-5 w-5 text-primary\" />Pengaturan Agen AI</CardTitle>\n                    <CardDescription>Konfigurasi perilaku, pesan, dan kemampuan agen AI Anda di halaman ini.</CardDescription>\n                  </CardHeader>\n                  <Form {...aiSettingsForm}>\n                    <form onSubmit={aiSettingsForm.handleSubmit(handleSaveAiAgentSettings)}>\n                      <CardContent className=\"p-6 space-y-6\">\n                        {isLoadingAiSettings ? (\n                            <div className=\"flex items-center space-x-2\">\n                              <Loader2 className=\"h-5 w-5 animate-spin\" />\n                              <span>Memuat pengaturan AI...</span>\n                            </div>\n                        ) : (\n                          <>\n                            <FormField\n                              control={aiSettingsForm.control}\n                              name=\"agentBehavior\"\n                              render={({ field }) => (\n                                <FormItem>\n                                  <FormLabel>Perilaku Agen AI</FormLabel>\n                                  <Select onValueChange={field.onChange} value={field.value}>\n                                    <FormControl><SelectTrigger><SelectValue placeholder=\"Pilih perilaku agen\" /></SelectTrigger></FormControl>\n                                    <SelectContent>\n                                      {AI_AGENT_BEHAVIORS.map(behavior => (\n                                        <SelectItem key={behavior} value={behavior}>{behavior}</SelectItem>\n                                      ))}\n                                    </SelectContent>\n                                  </Select>\n                                  <FormMessage />\n                                </FormItem>\n                              )}\n                            />\n                            <FormField\n                              control={aiSettingsForm.control}\n                              name=\"welcomeMessage\"\n                              render={({ field }) => (\n                                <FormItem>\n                                  <FormLabel className=\"flex items-center\"><MessageCircle className=\"mr-2 h-4 w-4 text-muted-foreground\" />Pesan Selamat Datang</FormLabel>\n                                  <FormControl><Textarea placeholder=\"Tulis pesan selamat datang dari agen AI...\" {...field} rows={3} /></FormControl>\n                                  <FormMessage />\n                                </FormItem>\n                              )}\n                            />\n                            <FormField\n                              control={aiSettingsForm.control}\n                              name=\"knowledgeBaseDescription\"\n                              render={({ field }) => (\n                                <FormItem>\n                                  <FormLabel className=\"flex items-center\"><Info className=\"mr-2 h-4 w-4 text-muted-foreground\" />Deskripsi/Panduan Umum Knowledge Base AI</FormLabel>\n                                  <FormControl><Textarea placeholder=\"Panduan tingkat tinggi untuk AI tentang bagaimana menggunakan knowledge base...\" {...field} rows={4} /></FormControl>\n                                  <FormDescription>Informasi ini akan membantu AI memahami konteks jawaban.</FormDescription>\n                                  <FormMessage />\n                                </FormItem>\n                              )}\n                            />\n                            <FormItem>\n                              <FormLabel>Kondisi Transfer ke Manusia</FormLabel>\n                              <FormDescription>Pilih kondisi kapan percakapan harus dialihkan ke staf manusia.</FormDescription>\n                              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-2 pt-2\">\n                                {AI_TRANSFER_CONDITIONS.map((condition) => (\n                                  <FormField\n                                    key={condition}\n                                    control={aiSettingsForm.control}\n                                    name=\"transferConditions\"\n                                    render={({ field }) => (\n                                      <FormItem className=\"flex flex-row items-start space-x-3 space-y-0\">\n                                        <FormControl>\n                                          <Checkbox\n                                            checked={field.value?.includes(condition)}\n                                            onCheckedChange={(checked) => {\n                                              return checked\n                                                ? field.onChange([...(field.value || []), condition])\n                                                : field.onChange(\n                                                    (field.value || []).filter(\n                                                      (value) => value !== condition\n                                                    )\n                                                  )\n                                            }}\n                                          />\n                                        </FormControl>\n                                        <FormLabel className=\"font-normal text-sm\">{condition}</FormLabel>\n                                      </FormItem>\n                                    )}\n                                  />\n                                ))}\n                              </div>\n                              <FormMessage>{aiSettingsForm.formState.errors.transferConditions?.message}</FormMessage>\n                            </FormItem>\n\n                            <FormField\n                              control={aiSettingsForm.control}\n                              name=\"enableHumanHandoff\"\n                              render={({ field }) => (\n                                <FormItem className=\"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm\">\n                                  <div className=\"space-y-0.5\">\n                                    <FormLabel className=\"flex items-center\"><PhoneForwarded className=\"mr-2 h-4 w-4 text-muted-foreground\"/>Aktifkan Notifikasi Handoff</FormLabel>\n                                    <FormDescription>Notifikasi dikirim jika kondisi transfer terpenuhi.</FormDescription>\n                                  </div>\n                                  <FormControl><Switch checked={field.value} onCheckedChange={field.onChange} /></FormControl>\n                                </FormItem>\n                              )}\n                            />\n                            {watchedEnableHumanHandoff && (\n                                <FormField\n                                  control={aiSettingsForm.control}\n                                  name=\"humanAgentWhatsAppNumber\"\n                                  render={({ field }) => (\n                                    <FormItem className=\"pl-4 mt-2\">\n                                      <FormLabel>Nomor WhatsApp Agen Manusia</FormLabel>\n                                      <FormControl><Input type=\"tel\" placeholder=\"mis. +6281234567890\" {...field} /></FormControl>\n                                      <FormDescription>Nomor ini akan menerima notifikasi saat handoff.</FormDescription>\n                                      <FormMessage />\n                                    </FormItem>\n                                  )}\n                                />\n                            )}\n\n                            <FormField\n                              control={aiSettingsForm.control}\n                              name=\"enableFollowUp\"\n                              render={({ field }) => (\n                                <FormItem className=\"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm\">\n                                  <div className=\"space-y-0.5\">\n                                    <FormLabel>Aktifkan Fitur Follow-up</FormLabel>\n                                    <FormDescription>AI mengirim follow-up jika pelanggan belum berkunjung/transaksi.</FormDescription>\n                                  </div>\n                                  <FormControl><Switch checked={field.value} onCheckedChange={field.onChange} /></FormControl>\n                                </FormItem>\n                              )}\n                            />\n                            {watchedEnableFollowUp && (\n                              <Card className=\"p-4 bg-muted/50 border-dashed\">\n                                <CardHeader className=\"p-0 pb-3\">\n                                    <CardTitle className=\"text-md\">Pengaturan Jadwal Follow-up</CardTitle>\n                                </CardHeader>\n                                <CardContent className=\"p-0 space-y-4\">\n                                  <FormField\n                                    control={aiSettingsForm.control}\n                                    name=\"followUpMessageTemplate\"\n                                    render={({ field }) => (\n                                      <FormItem>\n                                        <FormLabel>Template Pesan Follow-up</FormLabel>\n                                        <FormControl><Textarea placeholder=\"Tulis template pesan untuk follow-up...\" {...field} rows={3} /></FormControl>\n                                        <FormMessage />\n                                      </FormItem>\n                                    )}\n                                  />\n                                  <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n                                    <FormField\n                                        control={aiSettingsForm.control}\n                                        name=\"followUpDelays.firstAttemptHours\"\n                                        render={({ field }) => (\n                                        <FormItem>\n                                            <FormLabel>Penundaan Pertama (Jam)</FormLabel>\n                                            <FormControl><Input type=\"number\" placeholder=\"mis. 24\" {...field} \n                                            onChange={e => field.onChange(parseInt(e.target.value, 10) || undefined)}\n                                            value={field.value === undefined ? '' : String(field.value)}\n                                            /></FormControl>\n                                            <FormMessage />\n                                        </FormItem>\n                                        )}\n                                    />\n                                    <FormField\n                                        control={aiSettingsForm.control}\n                                        name=\"followUpDelays.secondAttemptDays\"\n                                        render={({ field }) => (\n                                        <FormItem>\n                                            <FormLabel>Penundaan Ke-2 (Hari)</FormLabel>\n                                            <FormControl><Input type=\"number\" placeholder=\"mis. 7\" {...field}\n                                            onChange={e => field.onChange(parseInt(e.target.value, 10) || undefined)}\n                                            value={field.value === undefined ? '' : String(field.value)}\n                                            /></FormControl>\n                                            <FormMessage />\n                                        </FormItem>\n                                        )}\n                                    />\n                                    <FormField\n                                        control={aiSettingsForm.control}\n                                        name=\"followUpDelays.thirdAttemptDays\"\n                                        render={({ field }) => (\n                                        <FormItem>\n                                            <FormLabel>Penundaan Ke-3 (Hari)</FormLabel>\n                                            <FormControl><Input type=\"number\" placeholder=\"mis. 7\" {...field} \n                                            onChange={e => field.onChange(parseInt(e.target.value, 10) || undefined)}\n                                            value={field.value === undefined ? '' : String(field.value)}\n                                            /></FormControl>\n                                            <FormMessage />\n                                        </FormItem>\n                                        )}\n                                    />\n                                    <FormField\n                                        control={aiSettingsForm.control}\n                                        name=\"followUpDelays.fourthAttemptDays\"\n                                        render={({ field }) => (\n                                        <FormItem>\n                                            <FormLabel>Penundaan Ke-4 (Hari)</FormLabel>\n                                            <FormControl><Input type=\"number\" placeholder=\"mis. 30\" {...field} \n                                            onChange={e => field.onChange(parseInt(e.target.value, 10) || undefined)}\n                                            value={field.value === undefined ? '' : String(field.value)}\n                                            /></FormControl>\n                                            <FormMessage />\n                                        </FormItem>\n                                        )}\n                                    />\n                                  </div>\n                                </CardContent>\n                              </Card>\n                            )}\n                          </>\n                        )}\n                      </CardContent>\n                      <CardFooter className=\"p-6\">\n                        <Button type=\"submit\" disabled={isSavingAiSettings || isLoadingAiSettings}>\n                          {isSavingAiSettings ? <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" /> : null}\n                          Simpan Pengaturan AI\n                        </Button>\n                      </CardFooter>\n                    </form>\n                  </Form>\n                </Card>\n              </DialogContent>\n            </Dialog>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}